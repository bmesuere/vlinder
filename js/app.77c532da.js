(function(){"use strict";var t={5894:function(t,e,s){var i=s(144),a=s(998),r=s(6232),o=s(6190),n=s(9582),l=s(4886),A=s(8271),h=s(4324),d=s(3059),c=s(3687),u=s(7953),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(a.Z,[e(r.Z,{attrs:{app:"",color:"primary",dark:"",dense:""}},[e(u.qW,[t._v("VLINDER")]),e(c.Z),e(o.Z,{attrs:{href:"http://vlinder.ugent.be",target:"_blank",text:""}},[e("span",{staticClass:"mr-2"},[t._v("VLINDER website")]),e(h.Z,[t._v("mdi-open-in-new")])],1)],1),e(d.Z,[e("router-view")],1),e(A.Z,{attrs:{padless:""}},[e(n.Z,{staticClass:"flex blue-grey darken-4",attrs:{flat:"",tile:""}},[e(l.EB,{staticClass:"white--text text-body-2 px-8"},[t._v(" © "+t._s((new Date).getFullYear())+" Universiteit Gent · v"+t._s(t.version)+" "),e(c.Z),e(o.Z,{staticClass:"mx-4",attrs:{dark:"",icon:"",href:"https://app.swaggerhub.com/apis-docs/bmesuere/VLINDER/",target:"_blank"}},[e(h.Z,{attrs:{size:"24px"}},[t._v("mdi-api")])],1),e(o.Z,{staticClass:"mx-4",attrs:{dark:"",icon:"",href:"https://github.com/bmesuere/vlinder",target:"_blank"}},[e(h.Z,{attrs:{size:"24px"}},[t._v("mdi-github")])],1),e(o.Z,{staticClass:"mx-4",attrs:{dark:"",icon:"",href:"https://twitter.com/VLINDER_project",target:"_blank"}},[e(h.Z,{attrs:{size:"24px"}},[t._v("mdi-twitter")])],1)],1)],1)],1)],1)},m=[],g=(0,i.aZ)({name:"App",setup(t,e){const s="1.3.0";return{version:s}}}),v=g,f=s(1001),y=(0,f.Z)(v,p,m,!1,null,null,null),b=y.exports,Z=s(6086),w=s(7398),x=s(8864);i.ZP.use(x.Z);var P=new x.Z({}),S=(s(7147),s(8345)),C=s(7359),k=s(1390),I=s(4127),j=s(266),L=s(2118),B=s(1713),E=s(6313),W=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(L.Z,[t.isError?e(C.Z,{attrs:{type:"error",outlined:""}},[t._v(" Er ging iets fout bij het ophalen van de meetgegevens. Probeer het later opnieuw. ")]):t._e(),e(B.Z,[e(j.Z,{attrs:{cols:"12"}},[e("StationsMap",{attrs:{dataLoaded:t.initialDataLoaded}})],1)],1),e(E.Z,{staticClass:"mt-n4",attrs:{flat:""}},[e(u.qW,{staticClass:"text-h5 ml-n4"},[t._v("Geselecteerde stations")]),e(c.Z),e("StationSelector")],1),e(B.Z,t._l(t.selectedStations,(function(t){return e(j.Z,{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e("StationCard",{attrs:{station:t}})],1)})),1),e(u.qW,{staticClass:"mt-5 text-h5"},[t._v("Afgelopen 24u")]),e(k.Z,{staticClass:"chip-banner",attrs:{sticky:"",app:"",color:"white"}},t._l(t.selectedStations,(function(s){return e(I.Z,{key:s.id,staticClass:"ma-1",attrs:{small:"",label:"",close:"",dark:"",color:t.legendColors[s.id]},on:{"click:close":function(e){return t.removeFromList(s.id)}}},[t._v(" "+t._s(s.city)+" · "+t._s(s.given_name)+" ")])})),1),e(B.Z,[e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.temp,tooltipPosition:t.tooltipPosition,updateLegendColors:""}})],1),e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.rainVolume,tooltipPosition:t.tooltipPosition}})],1),e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.pressure,tooltipPosition:t.tooltipPosition}})],1),e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.windSpeed,tooltipPosition:t.tooltipPosition}})],1),e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.humidity,tooltipPosition:t.tooltipPosition}})],1),e(j.Z,{attrs:{cols:"12",md:"6",lg:"4"}},[e("GraphCard",{attrs:{weatherProperty:t.weatherProperties.wbgt,tooltipPosition:t.tooltipPosition}})],1)],1)],1)},M=[];s(1703);const G="https://mooncake.ugent.be/api",R="/stations",Y="/measurements",_=(0,Z.Q_)("vlinder",{state:()=>({stationsLoaded:!1,stations:Array(),selectedStations:Array(),liveMeasurements:Array(),loadingHistoricMeasurements:!0,isStationsError:!1,isMeasurementsError:!1,isHistoricMeasurementsError:!1,legendColors:Object(),historicMeasurements:Array()}),getters:{historicData:t=>e=>{const s={property:e,series:[],timestamps:[]};return t.historicMeasurements.length>0&&(s.timestamps=t.historicMeasurements[0].map((t=>t.time)),t.historicMeasurements.forEach((t=>{s.series.push({stationId:t[0].id,values:t.map((t=>t[e]))})}))),s}},actions:{fetchStations(){return fetch(G+R).then((t=>t.ok?t.json():Promise.reject(new Error("station fetch failed")))).then((t=>(this.isStationsError=!1,this.stations=t,this.stationsLoaded=!0,t))).catch((t=>(this.isStationsError=!0,Promise.reject(t))))},fetchMeasurements(){return fetch(G+Y).then((t=>t.ok?t.json():Promise.reject(new Error("measurement fetch failed")))).then((t=>(this.isMeasurementsError=!1,this.liveMeasurements=t,t))).catch((t=>(this.isMeasurementsError=!0,Promise.reject(t))))},fetchHistoricMeasurements(){return this.loadingHistoricMeasurements=!0,Promise.all(this.selectedStations.map((t=>fetch(G+Y+"/"+t.id).then((t=>t.json()))))).then((t=>(this.historicMeasurements=t,this.loadingHistoricMeasurements=!1,t)))},selectStationById(t){const e=this.stations.find((e=>e.id===t));return!!e&&(this.addSelectedStation(e),!0)},deselectStationById(t){const e=this.stations.find((e=>e.id===t));e&&this.removeSelectedStation(e)},selectStationByName(t){const e=this.stations.find((e=>e.name===t));return!!e&&(this.addSelectedStation(e),!0)},toggleStationById(t){const e=this.stations.find((e=>e.id===t));e&&(this.selectedStations.includes(e)?this.removeSelectedStation(e):this.addSelectedStation(e))},setLegendColors(t){this.legendColors=t},addSelectedStation(t){this.selectedStations.includes(t)||this.selectedStations.push(t)},removeSelectedStation(t){this.selectedStations.splice(this.selectedStations.indexOf(t),1)}}});var F=s(4525),z=s(7868),V=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(n.Z,{directives:[{name:"show",rawName:"v-show",value:t.hasData,expression:"hasData"}],attrs:{loading:t.loading}},[e(F.Z,{attrs:{"two-line":""}},[e(z.km,[e(z.V9,{staticClass:"mb-1"},[t._v(t._s(t.weatherProperty.name))]),e(z.oZ,[t._v(t._s(t.weatherProperty.unit))])],1)],1),e("div",{staticClass:"mt-n3",attrs:{id:t.consolidatedGraphId}})],1)},O=[],D=s(2482),q=s(3999);const U=q.Dqn({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),H=U.format(".%L"),N=U.format(":%S"),J=U.format("%H:%M"),Q=U.format("%H:%M"),X=U.format("%a %d %b"),T=U.format("%a %d %b"),K=U.format("%B"),$=U.format("%Y");function tt(t){return(q.S1K(t)<t?H:q.Z_i(t)<t?N:q.WQD(t)<t?J:q.rr1(t)<t?Q:q.F0B(t)<t?q.NGh(t)<t?X:T:q.jBk(t)<t?K:$)(t)}class et{constructor(t,e,s,i){(0,D.Z)(this,"selector",void 0),(0,D.Z)(this,"selectedStations",void 0),(0,D.Z)(this,"property",void 0),(0,D.Z)(this,"tooltipPosition",void 0),(0,D.Z)(this,"measurements",void 0),(0,D.Z)(this,"margin",{top:15,right:35,bottom:30,left:45}),(0,D.Z)(this,"width",400),(0,D.Z)(this,"height",250),(0,D.Z)(this,"svg",void 0),(0,D.Z)(this,"x",void 0),(0,D.Z)(this,"y",void 0),(0,D.Z)(this,"color",void 0),(0,D.Z)(this,"line",void 0),(0,D.Z)(this,"xAxis",void 0),(0,D.Z)(this,"yAxis",void 0),(0,D.Z)(this,"lines",void 0),(0,D.Z)(this,"bisector",void 0),(0,D.Z)(this,"mouseG",void 0),(0,D.Z)(this,"mouseDots",void 0),(0,D.Z)(this,"mouseLabels",void 0),(0,D.Z)(this,"mouseBGLabels",void 0),(0,D.Z)(this,"mouseLine",void 0),(0,D.Z)(this,"timeLabel",void 0),this.selector=t,this.property=e,this.selectedStations=s,this.tooltipPosition=i}init(){this.svg=q.Ys(this.selector).html("").append("svg").attr("viewBox",`0, 0, ${this.width}, ${this.height}`),this.x=q.Xf().range([this.margin.left,this.width-this.margin.right]),this.y=q.BYU().range([this.height-this.margin.bottom,this.margin.top]),this.color=q.PKp(q.Cn1),this.line=q.jvg().curve(q.FdL).defined((t=>!(isNaN(t)||null===t))).x(((t,e)=>this.x(Date.parse(this.measurements.timestamps[e])))).y((t=>this.y(t))),this.lines=this.svg.append("g").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round"),this.xAxis=this.svg.append("g").attr("transform",`translate(0,${this.height-this.margin.bottom})`).call(q.LLu(this.x).ticks(this.width/80).tickFormat(tt)),this.yAxis=this.svg.append("g").attr("transform",`translate(${this.margin.left},0)`).call(q.y4O(this.y)),this.mouseG=this.svg.append("g").attr("class","mouse-over"),this.mouseLine=this.mouseG.append("line").attr("class","mouseover-line").attr("y1",this.y.range()[0]).attr("y2",this.y.range()[1]-20).style("stroke","black").style("stroke-width","1px").style("opacity","0"),this.timeLabel=this.mouseG.append("text").attr("class","mouseover-time").attr("y",-5+this.y.range()[1]).attr("text-anchor","end").style("font-size","small").style("opacity","0"),this.bisector=q.YFb((t=>Date.parse(t))).left,this.svg.on("touchmove mousemove",(t=>{if(!this.measurements)return;const{timestamp:e,i:s}=this.bisect(q.cx$(t,this.svg.node())[0]);this.tooltipPosition.timestamp=e,this.tooltipPosition.i=s})),this.svg.on("touchend mouseleave",(()=>{this.tooltipPosition.timestamp=-1,this.tooltipPosition.i=-1}))}updateData(t){this.measurements=t,this.update()}getLegendColors(){const t={};return this.measurements.series.forEach((e=>{t[e.stationId]=this.color(e.stationId)})),t}updateTooltip(){if(!this.measurements||0===this.measurements.series.length)return;const{timestamp:t,i:e}=this.tooltipPosition;-1===e?(this.timeLabel.style("opacity",0),this.mouseLine.style("opacity",0),this.mouseDots.attr("r",3).attr("cx",(()=>this.x(Date.parse(this.measurements.timestamps[this.measurements.timestamps.length-1])))).attr("cy",(t=>this.y(t.values[t.values.length-1]))),this.mouseBGLabels.attr("x",this.labelxPos()).attr("y",(t=>this.labelyPos(t))).text((t=>t.values[t.values.length-1])),this.mouseLabels.attr("x",this.labelxPos()).attr("y",(t=>this.labelyPos(t))).text((t=>t.values[t.values.length-1]))):(this.mouseLine.style("opacity",1).attr("x1",this.x(t)).attr("x2",this.x(t)),this.timeLabel.text(tt(t)).attr("x",-5+this.x(t)).style("opacity",1),this.mouseDots.attr("r",4).attr("cx",this.x(t)).attr("cy",(t=>this.y(t.values[e]))),this.mouseBGLabels.attr("x",this.labelxPos(t)).attr("y",(t=>this.labelyPos(t,e))).text((t=>t.values[e])),this.mouseLabels.attr("x",this.labelxPos(t)).attr("y",(t=>this.labelyPos(t,e))).text((t=>t.values[e])))}update(){if(!this.svg)return;if(!this.measurements)return;const t=this.measurements.series.filter((t=>null!==t.values[0]));this.x.domain(q.Wem(this.measurements.timestamps,(t=>Date.parse(t)))),this.y.domain([q.VV$(t,(t=>q.VV$(t.values))),q.Fp7(t,(t=>q.Fp7(t.values)))]).nice(),this.xAxis.transition().call(q.LLu(this.x).ticks(this.width/80).tickFormat(tt)),this.yAxis.transition().call(q.y4O(this.y).ticks(5)),this.lines.selectAll("path").data(t,(t=>t.stationId)).join("path").transition().attr("d",(t=>this.line(t.values))).attr("stroke",(t=>this.color(t.stationId))),this.mouseDots=this.mouseG.selectAll(".mouseover-dot").data(t,(t=>t.stationId)).join("circle").attr("class","mouseover-dot").attr("r",3).attr("cx",(()=>this.x(Date.parse(this.measurements.timestamps[this.measurements.timestamps.length-1])))).attr("cy",(t=>this.y(t.values[t.values.length-1]))).style("fill",(t=>this.color(t.stationId))),this.mouseBGLabels=this.mouseG.selectAll(".mouseover-BGlabels").data(t,(t=>t.stationId)).join("text").attr("class","mouseover-BGlabels").attr("x",this.labelxPos()).attr("y",(t=>this.labelyPos(t))).text((t=>t.values[t.values.length-1])).style("font-size","small").style("stroke","white").style("stroke-width",3),this.mouseLabels=this.mouseG.selectAll(".mouseover-labels").data(t,(t=>t.stationId)).join("text").attr("class","mouseover-labels").attr("x",this.labelxPos()).attr("y",(t=>this.labelyPos(t))).text((t=>t.values[t.values.length-1])).style("font-size","small").style("fill",(t=>this.color(t.stationId)))}labelxPos(t){return t=t||Date.parse(this.measurements.timestamps[this.measurements.timestamps.length-1]),5+this.x(t)}labelyPos(t,e){let s=-5;return void 0===e&&(e=t.values.length-1,s=4.5),s+this.y(t.values[e])}bisect(t){if(!this.measurements)return{timestamp:0,i:0};const e=this.x.invert(t),s=this.bisector(this.measurements.timestamps,e,1),i=Date.parse(this.measurements.timestamps[s-1]),a=Date.parse(this.measurements.timestamps[s]);return e-i>a-e?{timestamp:a,i:s}:{timestamp:i,i:s-1}}}var st=(0,i.aZ)({name:"GraphCard",props:{weatherProperty:{type:Object,required:!0},graphId:{type:String},updateLegendColors:{type:Boolean},tooltipPosition:{type:Object,default:()=>({i:-1,timestamp:-1})}},setup(t,e){let s;const a=["vlinder02","vlinder73","vlinder74","vlinder75","vlinder76"],r=_(),o=(0,i.Fl)((()=>r.historicMeasurements)),n=(0,i.Fl)((()=>r.selectedStations)),l=(0,i.Fl)((()=>r.loadingHistoricMeasurements)),A=(0,i.Fl)((()=>t.graphId||"weather_graph_"+t.weatherProperty.property)),h=(0,i.Fl)((()=>t.tooltipPosition.i)),d=(0,i.Fl)((()=>"wbgt"!==t.weatherProperty.property||n.value.some((t=>a.includes(t.name)))));return(0,i.bv)((()=>{s=new et(`#${A.value}`,t.weatherProperty,n.value,t.tooltipPosition),s.init()})),(0,i.YP)(o,(()=>{s&&(s.updateData(r.historicData(t.weatherProperty.property)),t.updateLegendColors&&r.setLegendColors(s.getLegendColors()))}),{deep:!0}),(0,i.YP)(h,(()=>{s&&s.updateTooltip()}),{deep:!0}),{consolidatedGraphId:A,hasData:d,loading:l}}}),it=st,at=(0,f.Z)(it,V,O,!1,null,null,null),rt=at.exports,ot=s(3737),nt=s(6760),lt=s(5495),At=s(5808),ht=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(n.Z,[e(o.Z,{staticClass:"mr-n3 mt-1",attrs:{fab:"",absolute:"",right:"","x-small":"",elevation:"3"},on:{click:t.removeFromList}},[e(h.Z,[t._v("mdi-close")])],1),e(ot.Z,{attrs:{"hide-delimiters":"",height:"auto",dark:"","show-arrows-on-hover":""}},[e(nt.Z,[e(lt.Z,{attrs:{"aspect-ratio":"2.3137254902",src:t.mapUrl,"lazy-src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAICAYAAAD0g6+qAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAAqACAAQAAAABAAAAEqADAAQAAAABAAAACAAAAAAMC9jHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAABgklEQVQoFR2R2Y7UMBREjx0nzjJJjxCDhHji/78FCfEDPCEkpO6h6cTZvFAzD5bspFxV99h8//GtWGOwNER2rK0Y+wlM4npbuIw93reENZBTxlhpbcaaLI1lWWZymXG/7j8xsvh8+QrJE0vmkWZSzpR0SDxgKwuF95Dz3NnjH6wLdM0XfWt0/wlbZLLFjZgTpRQZJNZtw1WVDBxhCdyuN7ZjxTjoupZUdmkiKdZ0bc1xPHAmerV5Yewm5nnDN56UkuIrrUQIC87V1L5i3WdqWnr/iZIPGuc500rdgHuZJrkroX6lbZ85j/g+SgwBs2+006g0jWagsk5Y1NQ0nPGVI50azbMfATcMhb/rg9//Dj62nlozJ0GVAquzlclxRqWKhXkzyRrtzhKugv8sVh90VqOcT6b2QlHNwT+RYxKPXawilaDs9ztd32kvfvEQz6g2pxiqnWsVEvRPjYrZqesR4kjfdkSJYop60pNGw0ddfFtZ+02PUDdWeqOgQYwG+rqXsec/ZLXPWAALVrMAAAAASUVORK5CYII="}})],1),e(nt.Z,[e("LandUseGraph",{attrs:{station:t.station}})],1),e(nt.Z,[e(lt.Z,{attrs:{"aspect-ratio":"2.3137254902",src:t.sponsorUrl,"lazy-src":"data:image/png;base64,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"}})],1)],1),e(F.Z,{attrs:{"three-line":""}},[e(z.km,{staticClass:"pb-1"},[e("div",{staticClass:"text-overline font-weight-regular mb-2",staticStyle:{"line-height":"1rem","font-size":"0.625rem !important"}},[t._v(" "+t._s(t.station.name)+" "),"Offline"==t.measurements["status"]?e("span",[t._v(" · offline")]):t._e()]),e(z.V9,{staticClass:"mb-1"},[t._v(t._s(t.station.city)+" · "+t._s(t.station.given_name))]),e(z.oZ,[e("span",{attrs:{title:"Betrokken school"}},[e(h.Z,{attrs:{small:""}},[t._v("mdi-school-outline")]),t._v(" "+t._s(t.station.school)+" ")],1),e("br"),e("span",{staticClass:"mt-1",staticStyle:{display:"inline-block"},attrs:{title:"Sponsor"}},[e(h.Z,{attrs:{small:""}},[t._v("mdi-heart-outline")]),""!==t.station.sponsor?e("span",[t._v(" "+t._s(t.station.sponsor)+" ")]):e("a",{attrs:{hfref:"mailto:vlinder@ugent.be"}},[t._v(" Dit station sponsoren? ")])],1)])],1)],1),e(At.Z,{attrs:{dense:"",subheader:""}},t._l(t.activeProperties,(function(s){return e(F.Z,{key:s.property},[e(z.oZ,{attrs:{title:s.title}},[e(h.Z,{staticClass:"pr-1"},[t._v(t._s(s.icon))]),t._v(" "+t._s(s.name))],1),e(z.V9,{staticClass:"text-right"},[t._v(t._s("Offline"==t.measurements["status"]?"-":t.measurements[s.property])+" "+t._s(s.unit))])],1)})),1)],1)},dt=[],ct=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:t.graphId}},[e(lt.Z,{attrs:{"aspect-ratio":"2.3137254902",src:"","lazy-src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAICAYAAAD0g6+qAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAAqACAAQAAAABAAAAEqADAAQAAAABAAAACAAAAAAMC9jHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAABgklEQVQoFR2R2Y7UMBREjx0nzjJJjxCDhHji/78FCfEDPCEkpO6h6cTZvFAzD5bspFxV99h8//GtWGOwNER2rK0Y+wlM4npbuIw93reENZBTxlhpbcaaLI1lWWZymXG/7j8xsvh8+QrJE0vmkWZSzpR0SDxgKwuF95Dz3NnjH6wLdM0XfWt0/wlbZLLFjZgTpRQZJNZtw1WVDBxhCdyuN7ZjxTjoupZUdmkiKdZ0bc1xPHAmerV5Yewm5nnDN56UkuIrrUQIC87V1L5i3WdqWnr/iZIPGuc500rdgHuZJrkroX6lbZ85j/g+SgwBs2+006g0jWagsk5Y1NQ0nPGVI50azbMfATcMhb/rg9//Dj62nlozJ0GVAquzlclxRqWKhXkzyRrtzhKugv8sVh90VqOcT6b2QlHNwT+RYxKPXawilaDs9ztd32kvfvEQz6g2pxiqnWsVEvRPjYrZqesR4kjfdkSJYop60pNGw0ddfFtZ+02PUDdWeqOgQYwG+rqXsec/ZLXPWAALVrMAAAAASUVORK5CYII="}})],1)},ut=[];class pt{constructor(t,e){(0,D.Z)(this,"selector",void 0),(0,D.Z)(this,"landUse",void 0),(0,D.Z)(this,"margin",{top:5,right:5,bottom:20,left:5}),(0,D.Z)(this,"width",295),(0,D.Z)(this,"height",127.5),(0,D.Z)(this,"waterColor","#9ab5cd"),(0,D.Z)(this,"pavedColor","#efc7c8"),(0,D.Z)(this,"greenColor","#b4c49c"),(0,D.Z)(this,"waterName","Water"),(0,D.Z)(this,"pavedName","Verhard"),(0,D.Z)(this,"greenName","Groen"),(0,D.Z)(this,"angle",void 0),(0,D.Z)(this,"radius",void 0),this.selector=t,this.landUse=e}init(){const t=q.Ys(this.selector).html("").append("svg").attr("viewBox",`0, 0, ${this.width}, ${this.height}`).attr("style","color: black").append("g").attr("transform",`translate(0, ${this.height-this.margin.bottom})`),e=q.knu().keys(["water","paved","green"]).value(((t,e)=>t.usage[e]))(this.landUse).map((t=>(t.forEach((e=>{e.key=t.key})),t))),s=q.PKp().domain(e.map((t=>t.key))).range([this.waterColor,this.pavedColor,this.greenColor]).unknown("#ccc");this.angle=q.BYU().domain([0,q.Fp7(e,(t=>q.Fp7(t,(t=>t[1]))))]).range([3.05/8*Math.PI,.5*Math.PI]),this.radius=q.tiA().domain(this.landUse.map((t=>t.distance))).range([this.margin.left,this.width-this.margin.right]).padding(.1);const i=t=>t.call(q.LLu(this.radius).tickSizeOuter(0).tickFormat((t=>t+" m"))).call((t=>t.selectAll(".domain").remove()));t.append("g").selectAll("g").data(e).join("g").attr("fill",(t=>s(t.key))).selectAll("path").data((t=>t)).join("path").attr("d",(t=>this.arc(t))).append("title").text((t=>`${q.WUZ(".0%")(t.data.usage[t.key])} ${this[t.key+"Name"].toLowerCase()} in een straal van ${t.data.distance}m rond het station`)),t.append("g").call(i);const a=t.append("g").attr("transform",`translate(10, ${-1*(this.height-this.margin.bottom)+10})`);a.append("text").attr("y",12).text("Landgebruik"),["water","paved","green"].forEach(((t,e)=>{a.append("rect").attr("width",10).attr("height",10).attr("y",14*(e+2)-9).attr("fill",this[t+"Color"]),a.append("text").attr("font-size",11).attr("x",15).attr("y",14*(e+2)).text(this[t+"Name"])}))}arc(t){return q.Nb1().innerRadius(this.radius(t.data.distance)).outerRadius(this.radius(t.data.distance)+this.radius.bandwidth()).startAngle(this.angle(t[0])).endAngle(this.angle(t[1]))()}}var mt=(0,i.aZ)({name:"LandUseGraph",props:{station:{type:Object,required:!0}},setup(t,e){let s;const a=(0,i.Fl)((()=>"land_use_"+t.station.id));return(0,i.bv)((()=>{s=new pt(`#${a.value}`,t.station.landUse),s.init()})),{graphId:a}}}),gt=mt,vt=(0,f.Z)(gt,ct,ut,!1,null,null,null),ft=vt.exports;const yt={temp:{property:"temp",name:"Temperatuur",legend:"Temperatuur (°C)",icon:"mdi-thermometer",title:"Temperatuur op dit moment",unit:"°C"},rainVolume:{property:"rainVolume",name:"Neerslag",legend:"Neerslag vandaag (l/m²)",icon:"mdi-weather-rainy",title:"Neerslag sinds middernacht",unit:"l/m²"},pressure:{property:"pressure",name:"Luchtdruk",legend:"Luchtdruk (hPa)",icon:"mdi-gauge",title:"Luchtdruk op dit moment",unit:"hPa"},windSpeed:{property:"windSpeed",name:"Windsnelheid",legend:"Windsnelheid (km/u)",icon:"mdi-weather-windy",title:"Windsnelheid op dit moment",unit:"km/u"},humidity:{property:"humidity",name:"Luchtvochtigheid",legend:"Luchtvochtigheid (%)",icon:"mdi-water-percent",title:"Luchtvochtigheid op dit moment",unit:"%"},wbgt:{property:"wbgt",name:"Gevoelstemperatuur (WBGT)",legend:"Gevoelstemperatuur (°C)",icon:"mdi-thermometer-lines",title:"Gevoelstemperatuur (WBGT) op dit moment",unit:"°C"}};var bt=(0,i.aZ)({name:"StationCard",components:{LandUseGraph:ft},props:{station:{type:Object,required:!0}},setup(t,e){const s=_(),a=(0,i.Fl)((()=>`./img/maps/${t.station.name}.png`)),r=(0,i.Fl)((()=>`./img/sponsors/${t.station.name}.png`)),o=(0,i.Fl)((()=>s.liveMeasurements.find((e=>e.id===t.station.id))||{})),n=(0,i.Fl)((()=>Object.values(yt).filter((t=>null!==o.value[t.property]))));function l(){(0,w.B)("station_deselect",{event_category:"stations",value:t.station.id}),s.deselectStationById(t.station.id)}return{mapUrl:a,sponsorUrl:r,measurements:o,activeProperties:n,removeFromList:l}}}),Zt=bt,wt=(0,f.Z)(Zt,ht,dt,!1,null,null,null),xt=wt.exports,Pt=s(8506),St=s(9223),Ct=s(7148),kt=s(1583),It=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Pt.Z,{attrs:{scrollable:"","max-width":"500",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(o.Z,t._g(t._b({attrs:{depressed:"",outlined:"",color:"primary"}},"v-btn",i,!1),s),[e(h.Z,{attrs:{left:"",dark:""}},[t._v("mdi-magnify")]),t._v(" Selecteer stations ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(n.Z,{staticClass:"mx-auto",attrs:{"max-width":"500"}},[e(l.EB,[e(Ct.Z,{attrs:{label:"Typ om te filteren","prepend-inner-icon":"mdi-magnify","hide-details":"",autofocus:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(l.ZB,{staticStyle:{height:"300px"}},[e(kt.Z,{attrs:{items:t.stations,search:t.search,filter:t.filter,active:t.activeStations,activatable:"",hoverable:"","multiple-active":"","open-on-click":""},on:{"update:active":t.selectStation},scopedSlots:t._u([{key:"label",fn:function({item:s}){return[t._v(" "+t._s(s.city+" · "+s.given_name)+" "),e("div",{staticClass:"caption mt-n1"},[""!==s.sponsor?e("span",{attrs:{title:"sponsor"}},[t._v(" "+t._s(s.sponsor)+" · ")]):t._e(),e("span",{attrs:{title:"school"}},[t._v(" "+t._s(s.school)+" ")])])]}},{key:"prepend",fn:function({active:s}){return[e(h.Z,[t._v(" "+t._s(s?"mdi-checkbox-outline":"mdi-checkbox-blank-outline")+" ")])]}}])})],1),e(St.Z),e(l.h7,[e(c.Z),e(o.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sluiten ")])],1)],1)],1)},jt=[],Lt=(0,i.aZ)({name:"StationSelector",setup(t,e){const s=(0,i.iH)(!1),a=(0,i.iH)(""),r=(0,i.iH)([]),o=_(),n=(0,i.Fl)((()=>o.stations)),l=(0,i.Fl)((()=>o.selectedStations));function A(t,e){const s=t.city+t.given_name+t.name+t.sponsor+t.school;return s.toLowerCase().includes(e.toLowerCase())}function h(t){const e=t.filter((t=>!r.value.includes(t))),s=r.value.filter((e=>!t.includes(e)));e.forEach((t=>{o.selectStationById(t)})),s.forEach((t=>{o.deselectStationById(t)}))}return(0,i.YP)(l,(()=>{r.value=l.value.map((t=>t.id))}),{deep:!0}),{dialog:s,search:a,activeStations:r,stations:n,selectedStations:l,filter:A,selectStation:h}}}),Bt=Lt,Et=(0,f.Z)(Bt,It,jt,!1,null,null,null),Wt=Et.exports,Mt=s(6748),Gt=s(7394),Rt=s(7913),Yt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"text-center"},[e(E.Z,{attrs:{flat:""}},[e(u.qW,{staticClass:"text-h5 ml-n4 d-none d-sm-flex"},[t._v(t._s(t.weatherProperties[t.selectedProperty].title))]),e(u.qW,{staticClass:"text-h5 ml-n4 d-sm-none"},[t._v(t._s(t.weatherProperties[t.selectedProperty].name))]),e(c.Z),e(Mt.Z,{attrs:{mandatory:""},model:{value:t.selectedProperty,callback:function(e){t.selectedProperty=e},expression:"selectedProperty"}},t._l(t.allowedProperties,(function(s){return e(Rt.Z,{key:s,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{value:s}},i),[e(h.Z,[t._v(t._s(t.weatherProperties[s].icon))])],1)]}}],null,!0)},[e("span",[t._v(t._s(t.weatherProperties[s].name))])])})),1)],1),e("div",{attrs:{id:t.mapId}},[t._m(0)],1),e(Gt.Z5,[t.tooltipInfo.shown?e("div",{staticClass:"text-left",style:{width:"250px","z-index":"10",position:"absolute",left:t.tooltipInfo.x+15+"px",top:t.tooltipInfo.y-45+"px"}},[e("TooltipCard",{attrs:{station:t.tooltipInfo.station}})],1):t._e()])],1)},_t=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e(lt.Z,{attrs:{"aspect-ratio":"3",src:"","lazy-src":"data:image/png;base64,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"}})}],Ft=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(n.Z,{attrs:{elevation:"10"}},[e(F.Z,{attrs:{"two-line":""}},[e(z.km,{staticClass:"pb-2"},[e("div",{staticClass:"text-overline font-weight-regular mb-1",staticStyle:{"line-height":"1rem","font-size":"0.625rem !important"}},[t._v(" "+t._s(t.station.name)+" "),"Offline"==t.measurements["status"]?e("span",[t._v(" · offline")]):t._e()]),e(z.V9,{staticClass:"mb-1"},[t._v(t._s(t.station.city)+" · "+t._s(t.station.given_name))]),e(z.oZ,[""!==t.station.sponsor?e("span",{attrs:{title:"sponsor"}},[e(h.Z,{attrs:{small:""}},[t._v("mdi-heart-outline")]),t._v(" "+t._s(t.station.sponsor)+" · ")],1):t._e(),e("span",{attrs:{title:"school"}},[e(h.Z,{attrs:{small:""}},[t._v("mdi-school-outline")]),t._v(" "+t._s(t.station.school)+" ")],1)])],1)],1),e(At.Z,{staticClass:"px-2",attrs:{subheader:""}},[e(B.Z,{attrs:{dense:""}},t._l(t.activeProperties,(function(s){return e(j.Z,{key:s.property,staticClass:"pa-0",attrs:{cols:"6"}},[e(F.Z,{staticClass:"px-2",staticStyle:{"min-height":"36px"},attrs:{dense:""}},[e(z.oZ,{attrs:{title:s.title}},[e(h.Z,{staticClass:"pr-1"},[t._v(t._s(s.icon))]),t._v(" "+t._s("Offline"==t.measurements["status"]?"-":t.measurements[s.property])+" "+t._s(s.unit)+" ")],1)],1)],1)})),1)],1)],1)},zt=[],Vt=(0,i.aZ)({name:"TooltipCard",props:{station:{type:Object,required:!0}},setup(t,e){const s=_(),a=(0,i.Fl)((()=>s.liveMeasurements.find((e=>e.id===t.station.id))||{})),r=(0,i.Fl)((()=>Object.values(yt).filter((t=>null!==a.value[t.property]))));return{activeProperties:r,measurements:a}}}),Ot=Vt,Dt=(0,f.Z)(Ot,Ft,zt,!1,null,null,null),qt=Dt.exports,Ut=s(6370);function Ht({color:t,title:e,tickSize:s=6,width:i=320,height:a=44+s,marginTop:r=18,marginRight:o=0,marginBottom:n=16+s,marginLeft:l=0,ticks:A=i/64,tickFormat:h,tickValues:d}={}){const c=q.Ue8("svg").attr("width",i).attr("height",a).attr("viewBox",[0,0,i,a]).style("overflow","visible").style("display","block");let u,p=t=>t.selectAll(".tick line").attr("y1",r+n-a);if(t.interpolate){const e=Math.min(t.domain().length,t.range().length);u=t.copy().rangeRound(q.q$2(q.sXR(l,i-o),e)),c.append("image").attr("x",l).attr("y",r).attr("width",i-l-o).attr("height",a-r-n).attr("preserveAspectRatio","none").attr("xlink:href",Nt(t.copy().domain(q.q$2(q.sXR(0,1),e))).toDataURL())}else if(t.interpolator){if(u=Object.assign(t.copy().interpolator(q.uLU(l,i-o)),{range(){return[l,i-o]}}),c.append("image").attr("x",l).attr("y",r).attr("width",i-l-o).attr("height",a-r-n).attr("preserveAspectRatio","none").attr("xlink:href",Nt(t.interpolator()).toDataURL()),!u.ticks){if(void 0===d){const e=Math.round(A+1);d=q.w6H(e).map((s=>q.VRg(t.domain(),s/(e-1))))}"function"!==typeof h&&(h=q.WUZ(void 0===h?",f":h))}}else if(t.invertExtent){const e=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),s=void 0===h?t=>t:"string"===typeof h?q.WUZ(h):h;u=q.BYU().domain([-1,t.range().length-1]).rangeRound([l,i-o]),c.append("g").selectAll("rect").data(t.range()).join("rect").attr("x",((t,e)=>u(e-1))).attr("y",r).attr("width",((t,e)=>u(e)-u(e-1))).attr("height",a-r-n).attr("fill",(t=>t)),d=q.w6H(e.length),h=t=>s(e[t],t)}else u=q.tiA().domain(t.domain()).rangeRound([l,i-o]),c.append("g").selectAll("rect").data(t.domain()).join("rect").attr("x",u).attr("y",r).attr("width",Math.max(0,u.bandwidth()-1)).attr("height",a-r-n).attr("fill",t),p=()=>{};return c.append("g").attr("transform",`translate(0,${a-n})`).call(q.LLu(u).ticks(A,"string"===typeof h?h:void 0).tickFormat("function"===typeof h?h:void 0).tickSize(s).tickValues(d)).call(p).call((t=>t.select(".domain").remove())).call((t=>t.append("text").attr("x",l).attr("y",r+n-a-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").text(e))),c.node()}function Nt(t,e=256){const s=q.Ue8("canvas").attr("width",e).attr("height",1).node(),i=s.getContext("2d");for(let a=0;a<e;++a)i.fillStyle=t(a/(e-1)),i.fillRect(a,0,1,1);return s}class Jt{constructor(t,e="temp",s,i,a){(0,D.Z)(this,"selector",void 0),(0,D.Z)(this,"selectedProperty","temp"),(0,D.Z)(this,"selectedStations",void 0),(0,D.Z)(this,"tooltipInfo",void 0),(0,D.Z)(this,"toggleCallback",void 0),(0,D.Z)(this,"loading",!0),(0,D.Z)(this,"belgium",void 0),(0,D.Z)(this,"stations",void 0),(0,D.Z)(this,"measurements",void 0),(0,D.Z)(this,"measurementsMap",new Map),(0,D.Z)(this,"margin",{top:5,right:10,bottom:50,left:10}),(0,D.Z)(this,"width",900),(0,D.Z)(this,"height",300),(0,D.Z)(this,"stationDots",void 0),(0,D.Z)(this,"colorScale",void 0),(0,D.Z)(this,"legend",void 0),this.selector=t,this.setProperty(e),this.selectedStations=s,this.tooltipInfo=i,this.toggleCallback=a}async prepareData(t,e){const s=fetch("./belgium.topo.json").then((t=>t.json()));this.belgium=await s,this.stations=t.filter((t=>t.name.startsWith("vlinder"))),this.measurements=e,this.measurementsMap=new Map(this.measurements.map((t=>[t.id,t])))}async init(t,e){await this.prepareData(t,e),this.colorScale=q.cJy(q.Vaf).domain(q.Wem(this.measurements.filter((t=>"Ok"===t.status)),(t=>t[this.selectedProperty])));const s=q.mw4().fitExtent([[this.margin.left,this.margin.top],[this.width-this.margin.right,this.height-this.margin.bottom]],Ut.Z(this.belgium,this.belgium.objects.municipalities)),i=q.l49().projection(s),a=q.Ys(this.selector).html("").append("svg").attr("viewBox",`0, 0, ${this.width}, ${this.height}`);a.append("g").selectAll(".muni").data(Ut.Z(this.belgium,this.belgium.objects.municipalities).features).join("path").attr("class","muni d-none d-sm-inline").attr("fill","#e5e5e5").attr("stroke","white").attr("stroke-linejoin","round").attr("d",i).append("title").text((t=>t?.properties?.name_nl)),a.append("g").selectAll(".province-bg").data(Ut.Z(this.belgium,this.belgium.objects.provinces).features).join("path").attr("class","province-bg d-sm-none").attr("fill","#e5e5e5").attr("stroke","none").attr("stroke-linejoin","round").attr("d",i),a.append("g").selectAll(".province").data(Ut.Z(this.belgium,this.belgium.objects.provinces).features).join("path").attr("class","province").attr("fill","none").attr("stroke","#bbbbbb").attr("stroke-linejoin","round").attr("d",i),this.stationDots=a.append("g").selectAll(".station").data(this.stations).join("circle").attr("class","station").attr("id",(t=>"station-"+t.id)).attr("cx",(t=>s([t.coordinates.longitude,t.coordinates.latitude])[0])).attr("cy",(t=>s([t.coordinates.longitude,t.coordinates.latitude])[1])).style("cursor","pointer").on("mouseenter",((t,e)=>{q.Ys("#station-"+e.id).attr("fill-opacity",1).attr("r",5),this.tooltip(e,t.pageX,t.pageY)})).on("mouseleave",((t,e)=>{q.Ys("#station-"+e.id).attr("r",(t=>this.stationRadius(t))).attr("fill-opacity",(t=>this.stationFillOpacity(t))),this.tooltip(null)})).on("click",((t,e)=>{this.toggleCallback(e.id)})),this.legend=a.append("g").attr("transform",`translate(${this.margin.left}, ${this.height-this.margin.top-40})`),this.loading=!1,this.update()}tooltip(t,e,s){t?(this.tooltipInfo.station=t,this.tooltipInfo.x=e,this.tooltipInfo.y=s,this.tooltipInfo.shown=!0):this.tooltipInfo.shown=!1}setProperty(t){this.selectedProperty=yt.hasOwnProperty(t)?t:"temp"}updateProperty(t){this.setProperty(t),this.update()}updateSelectedStations(){this.update()}updateMeasurements(t){this.measurements=t,this.measurementsMap=new Map(this.measurements.map((t=>[t.id,t]))),this.update()}update(){this.loading||(this.legend.html(""),this.colorScale.domain(q.Wem(this.measurements.filter((t=>"Ok"===t.status)),(t=>t[this.selectedProperty]))),this.legend.append((()=>Ht({color:this.colorScale,title:yt[this.selectedProperty].legend,width:200,tickSize:-10,ticks:4}))),this.stationDots.transition().attr("r",(t=>this.stationRadius(t))).attr("stroke",(t=>this.isSelectedStation(t)?this.stationColor(t):"none")).attr("stroke-width",(t=>this.isSelectedStation(t)?4:0)).attr("fill-opacity",(t=>this.stationFillOpacity(t))).attr("fill",(t=>this.isSelectedStation(t)?"white":this.stationColor(t))))}isSelectedStation(t){return this.selectedStations.map((t=>t.id)).includes(t.id)}stationRadius(t){return"Ok"!==this.measurementsMap.get(t.id)?.status?2:this.isSelectedStation(t)?5:4}stationColor(t){const e=this.measurementsMap.get(t.id);return"Ok"===e?.status?this.colorScale(e[this.selectedProperty]):"black"}stationFillOpacity(t){return"Ok"===this.measurementsMap.get(t.id)?.status?.7:1}}var Qt=(0,i.aZ)({name:"StationsMap",components:{TooltipCard:qt},props:{mapId:{type:String,default:"stationsMap"},dataLoaded:{type:Promise,required:!0}},setup(t,e){let s;const a=yt,r=["temp","rainVolume","windSpeed"],o=(0,i.iH)({shown:!1,station:null,x:0,y:0}),n=(0,i.iH)("temp"),l=_(),A=(0,i.Fl)((()=>l.selectedStations)),h=(0,i.Fl)((()=>l.liveMeasurements));function d(t){(0,w.B)("station_toggle",{event_category:"stations",value:t}),l.toggleStationById(t)}return(0,i.bv)((async()=>{s=new Jt(`#${t.mapId}`,n.value,A.value,o.value,d);const[e,i]=await t.dataLoaded;s.init(e,i)})),(0,i.YP)(A,(()=>{s&&s.updateSelectedStations()}),{deep:!0}),(0,i.YP)(n,(()=>{(0,w.B)("property_change",{event_category:"properties",value:n.value}),s&&s.updateProperty(n.value)})),(0,i.YP)(h,(()=>{s&&s.updateMeasurements(h.value)}),{deep:!0}),{weatherProperties:a,selectedProperty:n,allowedProperties:r,tooltipInfo:o}}}),Xt=Qt,Tt=(0,f.Z)(Xt,Yt,_t,!1,null,null,null),Kt=Tt.exports,$t=(0,i.aZ)({name:"Dashboard",components:{GraphCard:rt,StationCard:xt,StationSelector:Wt,StationsMap:Kt},props:{urlStations:{type:Array,default:()=>[]}},setup(t,e){const s=_(),a=(0,i.FN)();if(!a)throw new Error("No current instance");const r=a.proxy.$router,o=a.proxy.$route;let n;const l=(0,i.iH)(new Promise((t=>{n=t}))),A=(0,i.iH)({timestamp:-1,i:-1}),h=(0,i.Fl)((()=>yt)),d=(0,i.Fl)((()=>s.legendColors)),c=(0,i.Fl)((()=>s.selectedStations)),u=(0,i.Fl)((()=>s.isStationsError||s.isMeasurementsError)),p=JSON.parse(window.localStorage.getItem("selectedStations")||"[]"),m=s.fetchStations();m.then((()=>{let e=!1;t.urlStations.length>0&&t.urlStations.forEach((t=>{const i=s.selectStationByName(t);e||=i})),!e&&p.length>0&&p.forEach((t=>{const i=s.selectStationById(t);e||=i})),e||(s.selectStationById("zZ6ZeSg11dJ5zp5GrNwNck9A"),s.selectStationById("Do5lLMfezIdmUCzzsE0IwIbE"),s.selectStationById("XeIIA97QzN5xxk6AvdzAPquY"))}));const g=s.fetchMeasurements();function v(t){setTimeout((()=>{requestAnimationFrame((()=>{v(t),t()}))}),6e4)}function f(t){(0,w.B)("station_deselect",{event_category:"stations",value:t}),s.deselectStationById(t)}return Promise.all([m,g]).then((t=>{n(t)})),v(s.fetchMeasurements),v(s.fetchHistoricMeasurements),(0,i.YP)(c,(async()=>{s.fetchHistoricMeasurements();const t=Object.assign({},o.query);t.stations=c.value.map((t=>t.name)),await r.replace({query:t}),window.localStorage.setItem("selectedStations",JSON.stringify(c.value.map((t=>t.id))))}),{deep:!0}),{legendColors:d,initialDataLoaded:l,isError:u,removeFromList:f,selectedStations:c,tooltipPosition:A,weatherProperties:h}}}),te=$t,ee=(0,f.Z)(te,W,M,!1,null,null,null),se=ee.exports;i.ZP.use(S.Z);const ie=[{path:"/",alias:["/index.html"],name:"Home",component:se,props:t=>({urlStations:t.query.stations?[t.query.stations].flat():[]})}],ae=new S.Z({mode:"history",base:"/vlinder/",routes:ie});function re(t,e){t["old"+e]=t[e],t[e]=async function(s){return t["old"+e](s).catch((t=>{if("NavigationDuplicated"===t.name)return this.currentRoute;throw t}))}}re(ae,"push"),re(ae,"replace");var oe=ae;i.ZP.config.productionTip=!1,i.ZP.use(Z.og);const ne=(0,Z.WB)();i.ZP.use(w.ZP,{config:{id:"G-YY7WRV394E"}},oe),new i.ZP({vuetify:P,pinia:ne,router:oe,render:t=>t(b)}).$mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,r){if(!i){var o=1/0;for(h=0;h<t.length;h++){i=t[h][0],a=t[h][1],r=t[h][2];for(var n=!0,l=0;l<i.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(n=!1,r<o&&(o=r));if(n){t.splice(h--,1);var A=a();void 0!==A&&(e=A)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[i,a,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,r,o=i[0],n=i[1],l=i[2],A=0;if(o.some((function(e){return 0!==t[e]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var h=l(s)}for(e&&e(i);A<o.length;A++)r=o[A],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(h)},i=self["webpackChunkvlinder_dashboard"]=self["webpackChunkvlinder_dashboard"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5894)}));i=s.O(i)})();
//# sourceMappingURL=app.77c532da.js.map